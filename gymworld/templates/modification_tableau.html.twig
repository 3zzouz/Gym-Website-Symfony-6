{% extends 'base.html.twig' %}
{% block body %}
    <section class="class-timetable-section spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="section-title">
                        <span>Find Your Time</span>
                        <h2>Find Your Time</h2>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="table-controls">
                        <ul>
                            <li class="active" data-tsfilter="all">All event</li>
                            <li data-tsfilter="fitness">Fitness tips</li>
                            <li data-tsfilter="motivation">Motivation</li>
                            <li data-tsfilter="workout">Workout</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="class-timetable">
                        <table>
                            <thead>
                            <tr>
                                <th></th>
                                <th>Monday</th>
                                <th>Tuesday</th>
                                <th>Wednesday</th>
                                <th>Thursday</th>
                                <th>Friday</th>
                                <th>Saturday</th>
                                <th>Sunday</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td class="class-time">6.00am - 8.00am</td>
                                <td class="dark-bg hover-bg ts-meta"
                                    data-tsmeta="workout">
                                    <h5>WEIGHT LOOSE</h5>
                                    <span>RLefew D. Loee</span>
                                </td>
                                <td class="hover-bg ts-meta" data-tsmeta="fitness">
                                    <h5>Cardio</h5>
                                    <span>RLefew D. Loee</span>
                                </td>
                                <td class="dark-bg hover-bg ts-meta"
                                    data-tsmeta="workout">
                                    <h5>Yoga</h5>
                                    <span>Keaf Shen</span>
                                </td>
                                <td class="hover-bg ts-meta" data-tsmeta="fitness">
                                    <h5>Fitness</h5>
                                    <span>Kimberly Stone</span>
                                </td>
                                <td class="dark-bg blank-td"></td>
                                <td class="hover-bg ts-meta" data-tsmeta="motivation">
                                    <h5>Boxing</h5>
                                    <span>Rachel Adam</span>
                                </td>
                                <td class="dark-bg hover-bg ts-meta"
                                    data-tsmeta="workout">
                                    <h5>Body Building</h5>
                                    <span>Robert Cage</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="class-time">10.00am - 12.00am</td>
                                <td class="blank-td"></td>
                                <td class="dark-bg hover-bg ts-meta"
                                    data-tsmeta="fitness">
                                    <h5>Fitness</h5>
                                    <span>Kimberly Stone</span>
                                </td>
                                <td class="hover-bg ts-meta" data-tsmeta="workout">
                                    <h5>WEIGHT LOOSE</h5>
                                    <span>RLefew D. Loee</span>
                                </td>
                                <td class="dark-bg hover-bg ts-meta"
                                    data-tsmeta="motivation">
                                    <h5>Cardio</h5>
                                    <span>RLefew D. Loee</span>
                                </td>
                                <td class="hover-bg ts-meta" data-tsmeta="workout">
                                    <h5>Body Building</h5>
                                    <span>Robert Cage</span>
                                </td>
                                <td class="dark-bg hover-bg ts-meta"
                                    data-tsmeta="motivation">
                                    <h5>Karate</h5>
                                    <span>Donald Grey</span>
                                </td>
                                <td class="blank-td"></td>
                            </tr>
                            <tr>
                                <td class="class-time">5.00pm - 7.00pm</td>
                                <td class="dark-bg hover-bg ts-meta"
                                    data-tsmeta="fitness">
                                    <h5>Boxing</h5>
                                    <span>Rachel Adam</span>
                                </td>
                                <td class="hover-bg ts-meta" data-tsmeta="motivation">
                                    <h5>Karate</h5>
                                    <span>Donald Grey</span>
                                </td>
                                <td class="dark-bg hover-bg ts-meta"
                                    data-tsmeta="workout">
                                    <h5>Body Building</h5>
                                    <span>Robert Cage</span>
                                </td>
                                <td class="blank-td"></td>
                                <td class="dark-bg hover-bg ts-meta"
                                    data-tsmeta="workout">
                                    <h5>Yoga</h5>
                                    <span>Keaf Shen</span>
                                </td>
                                <td class="hover-bg ts-meta" data-tsmeta="motivation">
                                    <h5>Cardio</h5>
                                    <span>RLefew D. Loee</span>
                                </td>
                                <td class="dark-bg hover-bg ts-meta"
                                    data-tsmeta="fitness">
                                    <h5>Fitness</h5>
                                    <span>Kimberly Stone</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="class-time">7.00pm - 9.00pm</td>
                                <td class="hover-bg ts-meta" data-tsmeta="motivation">
                                    <h5>Cardio</h5>
                                    <span>RLefew D. Loee</span>
                                </td>
                                <td class="dark-bg blank-td"></td>
                                <td class="hover-bg ts-meta" data-tsmeta="fitness">
                                    <h5>Boxing</h5>
                                    <span>Rachel Adam</span>
                                </td>
                                <td class="dark-bg hover-bg ts-meta"
                                    data-tsmeta="workout">
                                    <h5>Yoga</h5>
                                    <span>Keaf Shen</span>
                                </td>
                                <td class="hover-bg ts-meta" data-tsmeta="motivation">
                                    <h5>Karate</h5>
                                    <span>Donald Grey</span>
                                </td>
                                <td class="dark-bg hover-bg ts-meta"
                                    data-tsmeta="fitness">
                                    <h5>Boxing</h5>
                                    <span>Rachel Adam</span>
                                </td>
                                <td class="hover-bg ts-meta" data-tsmeta="workout">
                                    <h5>WEIGHT LOOSE</h5>
                                    <span>RLefew D. Loee</span>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <button id="add">Add Row</button>
    </section>
{% endblock %}

{% block javascripts %}
    <script>
        var table = document.querySelector('table');

        table.addEventListener('click', function (e) {
            var t = e.target.closest('td');

            if (!t) return;
            if (t.classList.contains('class-time')) {
                t.setAttribute('contenteditable', true);
                t.focus();
            } else {
                // If the td is empty, add a h5 and span element
                if (t.textContent.trim() === '' && t.children.length === 0) {
                    var h5 = document.createElement('h5');
                    var span = document.createElement('span');
                    t.classList.remove('blank-td');
                    t.classList.add('hover-bg', 'ts-meta');
                    h5.innerHTML = '&nbsp;';
                    span.innerHTML = '&nbsp;';
                    t.appendChild(h5);
                    t.appendChild(span);
                }
                // If the clicked element is a h5 or span, make it editable
                if (e.target.tagName === 'H5' || e.target.tagName === 'SPAN') {
                    e.target.setAttribute('contenteditable', true);
                    e.target.focus();

                    e.target.addEventListener('blur', function () {
                        e.target.removeAttribute('contenteditable');
                        // Here you can add code to save the changes to your server
                        if (e.target.textContent.trim() === '') {
                            e.target.innerHTML = '&nbsp;';
                        }
                    });
                }
            }
        });
        document.querySelector("#add").addEventListener("click", function () {
            var row = table.insertRow();
            for (var i = 0; i < 8; i++) {
                var cell = row.insertCell(i);
                if (i === 0) cell.classList.add('class-time');
                else cell.classList.add('blank-td');
            }
        });
    </script>
{% endblock %}